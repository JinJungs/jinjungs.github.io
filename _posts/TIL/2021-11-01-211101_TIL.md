---
title: "211101_TIL(월)"
date: 2021-11-01 20:23:28 +0900
excerpt: "Java 객체 참조의 문제로 일어난 같은 값 여러번 호출 참사 해결"
tags:
  - thread
  - future
  - git
categories:
  - til
header:
  teaser: "../../img/til/211101.jpeg"

---

### 오늘 한 일

- 저번주 내내 괴롭히던 future 관련 문제가 사실은 future의 문제가 아니었다!
- loop를 도는중 같은 a라는 객체 참조하면서 setter로 값만 그때그때 다르게 세팅해서 다른 서버를 호출하는 로직이었다.
- 문제는 for문이 너무 빠른 나머지 1이라는 값을 세팅해서 호출하는 중에 a객체에 2라는 값이 세팅되어 호출되는 것이었다.
- 그래서 분명 1,2 를 세팅해서 호출해야하는데, 기록을 보면 1,2,2 이런 식으로 호출이 되었던 것이었다.
- 해결은 a라는 객체를 바로 쓰지 않고, 쓸 때마다 복사해서 사용하는 것이었다.



### 내일 할 일

- TIL 꾸준히 쓰기
- 지난 프로젝트 리팩토링하기